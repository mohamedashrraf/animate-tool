<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carousel مع أزرار زيارة</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#06b6d4;
      --glass: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,\"Noto Naskh Arabic\",Tahoma,Arial;background:linear-gradient(180deg,#071028 0%, #081428 60%),var(--bg);color:#eef2f7;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:24px}

    .container{width:100%;max-width:980px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:20px;padding:18px;box-shadow:0 10px 30px rgba(2,6,23,0.6);overflow:hidden}

    .carousel{position:relative;overflow:hidden;border-radius:12px;height:420px;background:var(--card);display:flex;align-items:center;justify-content:center}
    .slides{display:flex;height:100%;transition:transform 700ms cubic-bezier(.2,.9,.3,1)}
    .slide{min-width:100%;height:100%;position:relative;display:flex;align-items:center;justify-content:center}
    .slide img{max-width:100%;max-height:100%;object-fit:cover;border-radius:8px;transform:scale(1);transition:transform 1200ms ease}
    .slide.active img{transform:scale(1.04)}

    /* overlay content */
    .overlay{position:absolute;left:18px;bottom:22px;right:18px;display:flex;justify-content:space-between;align-items:flex-end;gap:12px}
    .info{backdrop-filter: blur(6px);background:linear-gradient(90deg, rgba(0,0,0,0.35), rgba(255,255,255,0.02));padding:12px 16px;border-radius:12px}
    .info h2{margin:0;font-size:18px}
    .info p{margin:4px 0 0;font-size:13px;opacity:0.85}

    .buttons{display:flex;gap:10px}
    .btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600;background:var(--accent);color:#06202a;box-shadow:0 6px 18px rgba(6,182,212,0.14);transition:transform .18s ease}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.08);color:#dff6fb}
    .btn:active{transform:translateY(2px)}

    /* arrows */
    .arrow{position:absolute;top:50%;transform:translateY(-50%);background:var(--glass);border-radius:10px;padding:8px;backdrop-filter: blur(4px);cursor:pointer;border:1px solid rgba(255,255,255,0.03)}
    .arrow.left{right:12px}
    .arrow.right{left:12px}
    .arrow svg{width:22px;height:22px;display:block}

    /* pagination */
    .dots{position:absolute;left:50%;bottom:12px;transform:translateX(50%);display:flex;gap:8px}
    .dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,0.12);cursor:pointer}
    .dot.active{background:var(--accent);transform:scale(1.15)}

    /* responsive */
    @media (max-width:700px){
      .carousel{height:320px}
      .overlay{flex-direction:column;align-items:flex-start}
      .info h2{font-size:16px}
      .btn{padding:10px 12px;font-size:14px}
    }

    /* subtle entrance animation */
    .card{animation:floatIn .9s cubic-bezier(.2,.9,.3,1)}
    @keyframes floatIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="carousel" aria-roledescription="carousel">
        <div class="slides" id="slides" style="transform:translateX(0)">
          <div class="slide" data-index="0">
            <img src="01.png" alt="صورة 1">
          </div>
          <div class="slide" data-index="1">
            <img src="02.png" alt="صورة 2">
          </div>
          <div class="slide" data-index="2">
            <img src="03.png" alt="صورة 3">
          </div>
        </div>

        <!-- arrows -->
        <button class="arrow left" id="prev" aria-label="السابق">
          <svg viewBox="0 0 24 24" fill="none"><path d="M15 6 L9 12 L15 18" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <button class="arrow right" id="next" aria-label="التالي">
          <svg viewBox="0 0 24 24" fill="none"><path d="M9 6 L15 12 L9 18" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <!-- overlay info & buttons -->
        <div class="overlay">
          <div class="info">
            <h2 id="title">مرحباً — استعرض الصور</h2>
            <p id="desc">اضغط Visit لزيارة المشروع المرتبط بالصورة.</p>
          </div>

          <div class="buttons" id="actionButtons">
            <!-- buttons تظهر وتختفي حسب السلايد بواسطة جافاسكربت -->
          </div>
        </div>

        <!-- dots -->
        <div class="dots" id="dots"></div>
      </div>
    </div>
  </div>

  <script>
    const slidesEl = document.getElementById('slides');
    const slides = Array.from(document.querySelectorAll('.slide'));
    const dotsEl = document.getElementById('dots');
    const actionButtons = document.getElementById('actionButtons');
    const title = document.getElementById('title');
    const desc = document.getElementById('desc');

    let current = 0;
    const total = slides.length;
    let autoplay = true;
    let timer = null;
    const autoplayDelay = 4500;

    // configuration of buttons per slide
    const slideConfig = [
      { title: 'مشروع Pronoun Construct', desc: 'الصورة الأولى — يوجد زرين للزيارة', buttons:[
        {text:'Visit Pronoun Construct', href:'https://pronoun-construct.vercel.app/'},
        {text:'Visit Game Construct', href:'https://game-construct.vercel.app/', secondary:true}
      ]},
      { title: 'مشروع Pronoun GSAP', desc: 'الصورة الثانية — زر واحد للزيارة', buttons:[
        {text:'Visit Pronoun GSAP', href:'https://pronoun-gsap.vercel.app/'}
      ]},
      { title: 'صورة عرضية', desc: 'الصورة الثالثة — لا توجد أزرار هنا', buttons:[] }
    ];

    function buildDots(){
      for(let i=0;i<total;i++){
        const d = document.createElement('div');
        d.className='dot'+(i===0?' active':'');
        d.dataset.index = i;
        d.setAttribute('aria-label', 'عرض '+(i+1));
        d.addEventListener('click', ()=>goTo(i));
        dotsEl.appendChild(d);
      }
    }

    function renderButtonsFor(idx){
      actionButtons.innerHTML='';
      const cfg = slideConfig[idx];
      title.textContent = cfg.title;
      desc.textContent = cfg.desc;
      if(cfg.buttons && cfg.buttons.length){
        cfg.buttons.forEach((b, i)=>{
          const btn = document.createElement('a');
          btn.className = 'btn'+(b.secondary? ' secondary':'');
          btn.textContent = b.text;
          btn.href = b.href;
          btn.target = '_blank';
          btn.rel = 'noopener noreferrer';
          actionButtons.appendChild(btn);
        });
      }
    }

    function updateActive(){
      slides.forEach((s,i)=> s.classList.toggle('active', i===current));
      const translateX = -current * 100;
      slidesEl.style.transform = `translateX(${translateX}%)`;
      Array.from(dotsEl.children).forEach((d,i)=> d.classList.toggle('active', i===current));
      renderButtonsFor(current);
    }

    function goTo(index){
      current = (index + total) % total;
      updateActive();
      resetAutoplay();
    }

    document.getElementById('prev').addEventListener('click', ()=> goTo(current-1));
    document.getElementById('next').addEventListener('click', ()=> goTo(current+1));

    function startAutoplay(){
      if(!autoplay) return;
      stopAutoplay();
      timer = setInterval(()=>{
        goTo(current+1);
      }, autoplayDelay);
    }
    function stopAutoplay(){ if(timer) clearInterval(timer); timer=null }
    function resetAutoplay(){ stopAutoplay(); startAutoplay(); }

    // pause on hover
    document.querySelector('.carousel').addEventListener('mouseenter', ()=>{ autoplay=false; stopAutoplay(); });
    document.querySelector('.carousel').addEventListener('mouseleave', ()=>{ autoplay=true; startAutoplay(); });

    // keyboard support
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowLeft') goTo(current-1);
      if(e.key === 'ArrowRight') goTo(current+1);
    });

    // init
    buildDots();
    updateActive();
    startAutoplay();

    // make images draggable swipe for touch
    let startX = 0; let isDown = false;
    slidesEl.addEventListener('pointerdown', (e)=>{ startX = e.clientX; isDown=true; slidesEl.setPointerCapture(e.pointerId); });
    slidesEl.addEventListener('pointerup', (e)=>{ if(!isDown) return; isDown=false; const diff = e.clientX - startX; if(diff>40) goTo(current-1); else if(diff < -40) goTo(current+1); slidesEl.releasePointerCapture(e.pointerId); });

    // accessibility: announce slide changes (simple)
    const live = document.createElement('div'); live.setAttribute('aria-live','polite'); live.style.position='absolute'; live.style.left='-9999px'; document.body.appendChild(live);
    const observer = new MutationObserver(()=>{ live.textContent = `الشريحة ${current+1} من ${total}`; });
    observer.observe(slidesEl, {attributes:true, childList:true, subtree:true});
  </script>
</body>
</html>
